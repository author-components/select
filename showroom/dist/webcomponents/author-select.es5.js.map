{"version":3,"file":"author-select.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorSelectElement extends AuthorMenuElement {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      middleware: {\n        private: true,\n        default: {\n          beforeChange: null,\n          afterChange: null\n        }\n      },\n\n      selectedOptionsElement: {\n        readonly: true,\n        get: () => this.querySelector('author-selected-options')\n      },\n\n      type: {\n        readonly: true,\n        get: () => this.multiple ? 'select-multiple' : 'select-one'\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.change': evt => {\n        let { attribute, oldValue, newValue } = evt.detail\n\n        if (newValue === oldValue) {\n          return\n        }\n\n        switch (attribute) {\n          case 'multiple': return this.emit('state.change', {\n            name: 'multiple',\n            value: this.multiple\n          })\n\n          case 'placeholder':\n            if (this.selectedOptionsElement) {\n              this.selectedOptionsElement.update()\n            }\n\n            break\n        }\n      },\n\n      'options.selected': evt => this.emit('options.selected', evt.detail.options, this.selectedOptionsElement)\n    })\n  }\n\n  static get observedAttributes () {\n    return [...AuthorMenuElement.observedAttributes, 'multiple']\n  }\n\n  clear () {\n    super.clear()\n    this.selectedOptionsElement.clear()\n  }\n\n  inject (sourceElement, labels = null) {\n    super.inject(sourceElement, labels)\n\n    if (sourceElement.localName === 'select') {\n      let selectedOptionsElement = document.createElement('author-selected-options')\n      selectedOptionsElement.slot = 'selectedoptions'\n      this.appendChild(selectedOptionsElement)\n\n      if (!this.multiple) {\n        this.selectedOptionsElement.add(this.optionsElement.options[this.selectedIndex])\n      }\n    }\n  }\n}\n\ncustomElements.define('author-select', AuthorSelectElement)\n\nexport default AuthorSelectElement\n"],"names":["AuthorSelectElement","UTIL","defineProperties","middleware","private","default","beforeChange","afterChange","selectedOptionsElement","readonly","get","querySelector","type","multiple","registerListeners","evt","detail","attribute","oldValue","newValue","emit","name","value","update","options","clear","sourceElement","labels","localName","document","createElement","slot","appendChild","add","optionsElement","selectedIndex","AuthorMenuElement","observedAttributes","customElements","define"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;;;;;EACJ,iCAAe;EAAA;;EAAA;;EACb;;EAEA,UAAKC,IAAL,CAAUC,gBAAV,CAA2B;EACzBC,MAAAA,UAAU,EAAE;EACVC,QAAAA,OAAO,EAAE,IADC;EAEVC,QAAAA,OAAO,EAAE;EACPC,UAAAA,YAAY,EAAE,IADP;EAEPC,UAAAA,WAAW,EAAE;EAFN;EAFC,OADa;EASzBC,MAAAA,sBAAsB,EAAE;EACtBC,QAAAA,QAAQ,EAAE,IADY;EAEtBC,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKC,aAAL,CAAmB,yBAAnB,CAAN;EAAA;EAFiB,OATC;EAczBC,MAAAA,IAAI,EAAE;EACJH,QAAAA,QAAQ,EAAE,IADN;EAEJC,QAAAA,GAAG,EAAE;EAAA,iBAAM,MAAKG,QAAL,GAAgB,iBAAhB,GAAoC,YAA1C;EAAA;EAFD;EAdmB,KAA3B;;EAoBA,UAAKZ,IAAL,CAAUa,iBAAV,gCAAkC;EAChC,0BAAoB,yBAAAC,GAAG,EAAI;EAAA,0BACeA,GAAG,CAACC,MADnB;EAAA,YACnBC,SADmB,eACnBA,SADmB;EAAA,YACRC,QADQ,eACRA,QADQ;EAAA,YACEC,QADF,eACEA,QADF;;EAGzB,YAAIA,QAAQ,KAAKD,QAAjB,EAA2B;EACzB;EACD;;EAED,gBAAQD,SAAR;EACE,eAAK,UAAL;EAAiB,mBAAO,MAAKG,IAAL,CAAU,cAAV,EAA0B;EAChDC,cAAAA,IAAI,EAAE,UAD0C;EAEhDC,cAAAA,KAAK,EAAE,MAAKT;EAFoC,aAA1B,CAAP;;EAKjB,eAAK,aAAL;EACE,gBAAI,MAAKL,sBAAT,EAAiC;EAC/B,oBAAKA,sBAAL,CAA4Be,MAA5B;EACD;;EAED;EAXJ;EAaD,OArB+B;EAuBhC,0BAAoB,yBAAAR,GAAG;EAAA,eAAI,MAAKK,IAAL,CAAU,kBAAV,EAA8BL,GAAG,CAACC,MAAJ,CAAWQ,OAAzC,EAAkD,MAAKhB,sBAAvD,CAAJ;EAAA;EAvBS,KAAlC;;EAvBa;EAgDd;;;;8BAMQ;EACP;;EACA,WAAKA,sBAAL,CAA4BiB,KAA5B;EACD;;;6BAEOC,eAA8B;EAAA,UAAfC,MAAe,uEAAN,IAAM;;EACpC,sFAAaD,aAAb,EAA4BC,MAA5B;;EAEA,UAAID,aAAa,CAACE,SAAd,KAA4B,QAAhC,EAA0C;EACxC,YAAIpB,sBAAsB,GAAGqB,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAA7B;EACAtB,QAAAA,sBAAsB,CAACuB,IAAvB,GAA8B,iBAA9B;EACA,aAAKC,WAAL,CAAiBxB,sBAAjB;;EAEA,YAAI,CAAC,KAAKK,QAAV,EAAoB;EAClB,eAAKL,sBAAL,CAA4ByB,GAA5B,CAAgC,KAAKC,cAAL,CAAoBV,OAApB,CAA4B,KAAKW,aAAjC,CAAhC;EACD;EACF;EACF;;;0BArBgC;EAC/B,0CAAWC,iBAAiB,CAACC,kBAA7B,IAAiD,UAAjD;EACD;;;;IArD+BD;;EA2ElCE,cAAc,CAACC,MAAf,CAAsB,eAAtB,EAAuCvC,mBAAvC;;;;;;;;"}